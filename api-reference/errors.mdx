---
title: Errors
description: Error codes and handling in the Widgetic API
---

The Widgetic API uses standard HTTP status codes and returns detailed error information in the response body. All errors follow a consistent format with machine-readable codes, human-readable messages, and actionable guidance.

## Error Response Format

```json
{
  "success": false,
  "error": {
    "code": "AUTH_TOKEN_EXPIRED",
    "message": "The authentication token has expired",
    "correlationId": "req_123e4567-e89b-12d3-a456-426614174000",
    "timestamp": "2024-01-15T10:30:00.000Z",
    "docUrl": "https://docs.widgetic.com/docs/authentication",
    "suggestedAction": "Refresh your authentication token"
  }
}
```

| Field | Description |
|-------|-------------|
| `code` | Machine-readable error code (use this for programmatic handling) |
| `message` | Human-readable error description |
| `correlationId` | Unique request ID for support inquiries |
| `timestamp` | ISO 8601 timestamp when the error occurred |
| `docUrl` | Link to relevant documentation |
| `suggestedAction` | Recommended action to resolve the error |

## HTTP Status Codes

| Status | Category | Description |
|--------|----------|-------------|
| 200 | Success | Request succeeded |
| 201 | Success | Resource created |
| 204 | Success | No content (successful deletion) |
| 400 | Client Error | Bad request / Validation error |
| 401 | Client Error | Authentication required or failed |
| 402 | Client Error | Payment required (credits/subscription) |
| 403 | Client Error | Forbidden (insufficient permissions) |
| 404 | Client Error | Resource not found |
| 409 | Client Error | Conflict (resource already exists) |
| 410 | Client Error | Gone (resource permanently removed) |
| 413 | Client Error | Payload too large (quota exceeded) |
| 422 | Client Error | Unprocessable entity (business logic error) |
| 429 | Client Error | Rate limit exceeded |
| 500 | Server Error | Internal server error |
| 502 | Server Error | Bad gateway (external service error) |
| 503 | Server Error | Service unavailable |
| 504 | Server Error | Gateway timeout |

---

## Error Code Reference

### Authentication Errors (401)

Errors related to verifying your identity.

| Code | Message | Suggested Action |
|------|---------|------------------|
| `AUTH_REQUIRED` | Authentication required to access this resource | Provide valid authentication credentials |
| `AUTH_TOKEN_INVALID` | The provided authentication token is invalid | Provide a valid authentication token |
| `AUTH_TOKEN_EXPIRED` | The authentication token has expired | Refresh your authentication token |
| `AUTH_TOKEN_MALFORMED` | The authentication token is malformed | Ensure the token is properly formatted |
| `AUTH_CREDENTIALS_INVALID` | The provided credentials are invalid | Verify your username and password |
| `AUTH_API_KEY_INVALID` | The provided API key is invalid | Verify your API key is correct and active |
| `AUTH_API_KEY_EXPIRED` | The API key has expired | Generate a new API key or renew the existing one |

### Authorization Errors (403)

Errors related to permissions and access control.

| Code | Message | Suggested Action |
|------|---------|------------------|
| `AUTHZ_INSUFFICIENT_PERMISSIONS` | You do not have permission to perform this action | Contact your administrator to request the necessary permissions |
| `AUTHZ_RESOURCE_ACCESS_DENIED` | You do not have permission to access this resource | Ensure you have the correct permissions for this resource |
| `AUTHZ_ORGANIZATION_ACCESS_DENIED` | You do not have permission to access this organization | Contact the organization owner for access |
| `AUTHZ_PLAN_RESTRICTION` | This feature is not available on your current plan | Upgrade your plan to access this feature |

### Validation Errors (400)

Errors related to request format and data validation.

| Code | Message | Suggested Action |
|------|---------|------------------|
| `VALIDATION_FIELD_REQUIRED` | A required field is missing | Provide all required fields in your request |
| `VALIDATION_FIELD_INVALID` | A field contains an invalid value | Check the field format and try again |
| `VALIDATION_FIELD_TYPE_MISMATCH` | A field has an incorrect data type | Ensure the field matches the expected data type |
| `VALIDATION_FIELD_LENGTH` | A field exceeds the maximum allowed length | Reduce the field length to meet the requirements |
| `VALIDATION_JSON_MALFORMED` | The request body contains malformed JSON | Ensure your JSON is properly formatted |
| `VALIDATION_SCHEMA_VIOLATION` | The request does not match the expected schema | Review the API schema and adjust your request |

### Resource Errors (404, 409, 410)

Errors related to resource existence and conflicts.

| Code | Status | Message | Suggested Action |
|------|--------|---------|------------------|
| `RESOURCE_NOT_FOUND` | 404 | The requested resource was not found | Verify the resource ID and try again |
| `RESOURCE_WIDGET_NOT_FOUND` | 404 | The specified widget was not found | Check the widget ID and ensure it exists |
| `RESOURCE_COMPOSITION_NOT_FOUND` | 404 | The specified composition was not found | Check the composition ID and ensure it exists |
| `RESOURCE_ORGANIZATION_NOT_FOUND` | 404 | The specified organization was not found | Check the organization ID and ensure it exists |
| `RESOURCE_USER_NOT_FOUND` | 404 | The specified user was not found | Check the user ID and ensure it exists |
| `RESOURCE_ALREADY_EXISTS` | 409 | A resource with the same identifier already exists | Use a different identifier or update the existing resource |
| `RESOURCE_GONE` | 410 | The requested resource is no longer available | This resource has been permanently removed |

### Rate Limiting Errors (429)

Errors related to request frequency limits.

| Code | Message | Suggested Action | Retry-After |
|------|---------|------------------|-------------|
| `RATE_LIMIT_EXCEEDED` | Rate limit exceeded | Wait before making more requests | 60s |
| `RATE_LIMIT_API_KEY_EXCEEDED` | API key rate limit exceeded | Wait before making more requests or upgrade your plan | 60s |
| `RATE_LIMIT_USER_EXCEEDED` | User rate limit exceeded | Wait before making more requests | 60s |
| `RATE_LIMIT_WEBHOOK_EXCEEDED` | Webhook rate limit exceeded | Check your webhook configuration and reduce frequency | 60s |

<Tip>
  When you receive a 429 response, check the `Retry-After` header for the number of seconds to wait before retrying.
</Tip>

### Quota Errors (402, 413, 429)

Errors related to usage limits and billing.

| Code | Status | Message | Suggested Action |
|------|--------|---------|------------------|
| `QUOTA_CREDITS_EXHAUSTED` | 402 | Your credit quota has been exhausted | Purchase additional credits or upgrade your plan |
| `QUOTA_STORAGE_EXCEEDED` | 413 | Storage quota exceeded | Delete some files or upgrade your storage plan |
| `QUOTA_API_CALLS_EXCEEDED` | 429 | Monthly API call quota exceeded | Upgrade your plan or wait for quota reset |

### Business Logic Errors (409, 422)

Errors related to business rules and state conflicts.

| Code | Status | Message | Suggested Action |
|------|--------|---------|------------------|
| `BUSINESS_OPERATION_INVALID` | 422 | The requested operation is not valid in the current context | Review the operation requirements and current state |
| `BUSINESS_STATE_CONFLICT` | 409 | The operation conflicts with the current resource state | Refresh the resource state and try again |
| `BUSINESS_WIDGET_ALREADY_PUBLISHED` | 409 | The widget is already published | Unpublish the widget first or create a new version |
| `BUSINESS_SUBSCRIPTION_REQUIRED` | 402 | A subscription is required to perform this action | Subscribe to a plan to access this feature |

### External Service Errors (502, 503, 504)

Errors related to third-party dependencies.

| Code | Status | Message | Retry-After |
|------|--------|---------|-------------|
| `EXTERNAL_SERVICE_UNAVAILABLE` | 503 | An external service is temporarily unavailable | 300s |
| `EXTERNAL_SERVICE_TIMEOUT` | 504 | An external service request timed out | 60s |

### System Errors (500, 503)

Internal system errors.

| Code | Status | Message | Suggested Action |
|------|--------|---------|------------------|
| `SYSTEM_INTERNAL_ERROR` | 500 | An internal server error occurred | Contact support if the problem persists |
| `SYSTEM_MAINTENANCE` | 503 | The system is temporarily under maintenance | Try again later |
| `SERVICE_UNAVAILABLE` | 503 | The service is temporarily unavailable | Try again later |
| `SERVICE_DEGRADED` | 503 | The service is experiencing degraded performance | Some features may be slower than usual |

---

## Direct error documentation links (anchors)

Some integrations return a `docUrl` pointing to `/api/errors#...` (legacy format). We support those links and map them to this page.

### Authentication failed

Use when you receive `AUTHENTICATION_FAILED` (legacy). See also: `AUTH_REQUIRED`, `AUTH_TOKEN_INVALID`, `AUTH_TOKEN_EXPIRED`.

### Invalid API key

Use when you receive `INVALID_API_KEY` (legacy). See also: `AUTH_API_KEY_INVALID`, `AUTH_API_KEY_EXPIRED`.

### Insufficient permissions

Use when you receive `INSUFFICIENT_PERMISSIONS` (legacy). See also: `AUTHZ_INSUFFICIENT_PERMISSIONS`.

### Forbidden

Use when you receive `FORBIDDEN` (legacy). See also: `AUTHZ_RESOURCE_ACCESS_DENIED`.

### Resource not found

Use when you receive `RESOURCE_NOT_FOUND` / `NOT_FOUND` (legacy). See also: `RESOURCE_NOT_FOUND`.

### Widget not found

Use when you receive `WIDGET_NOT_FOUND` (legacy). See also: `RESOURCE_WIDGET_NOT_FOUND`.

### User not found

Use when you receive `USER_NOT_FOUND` (legacy). See also: `RESOURCE_USER_NOT_FOUND`.

### Validation error

Use when you receive `VALIDATION_ERROR` (legacy). See also: `VALIDATION_FIELD_INVALID`, `VALIDATION_SCHEMA_VIOLATION`.

### Invalid request format

Use when you receive `INVALID_REQUEST_FORMAT` (legacy). See also: `VALIDATION_JSON_MALFORMED`.

### Missing required field

Use when you receive `MISSING_REQUIRED_FIELD` (legacy). See also: `VALIDATION_FIELD_REQUIRED`.

### Rate limit exceeded

Use when you receive `RATE_LIMIT_EXCEEDED` (legacy). See also: `RATE_LIMIT_EXCEEDED`.

### Resource conflict

Use when you receive `RESOURCE_CONFLICT` (legacy). See also: `RESOURCE_ALREADY_EXISTS`, `BUSINESS_STATE_CONFLICT`.

### Duplicate resource

Use when you receive `DUPLICATE_RESOURCE` (legacy). See also: `RESOURCE_ALREADY_EXISTS`.

### Internal server error

Use when you receive `INTERNAL_SERVER_ERROR` (legacy). See also: `SYSTEM_INTERNAL_ERROR`.

### Service unavailable

Use when you receive `SERVICE_UNAVAILABLE` (legacy). See also: `SERVICE_UNAVAILABLE`, `SERVICE_DEGRADED`.

### Database error

Use when you receive `DATABASE_ERROR` (legacy). If this persists, contact support and include the `correlationId`.

---

## Handling Errors

### JavaScript/TypeScript

```javascript
import { WidgetsApi } from '@widgetic/api-sdk';

const widgets = new WidgetsApi('YOUR_API_KEY');

try {
  const widget = await widgets.getWidgetById({ widgetId: 'invalid-id' });
} catch (error) {
  const errorBody = error.body?.error;
  
  switch (error.status) {
    case 401:
      console.log('Authentication failed:', errorBody?.code);
      // Re-authenticate or refresh token
      break;
    case 403:
      console.log('Access denied:', errorBody?.suggestedAction);
      break;
    case 404:
      console.log('Resource not found');
      break;
    case 429:
      const retryAfter = error.headers?.get('Retry-After') || 60;
      console.log(`Rate limited. Retry after ${retryAfter} seconds`);
      break;
    default:
      console.error('Error:', errorBody?.message);
      console.error('Correlation ID:', errorBody?.correlationId);
  }
}
```

### Using Correlation IDs

Every error response includes a `correlationId`. Include this when contacting support:

```javascript
catch (error) {
  const correlationId = error.body?.error?.correlationId;
  console.error(`Error [${correlationId}]:`, error.body?.error?.message);
  
  // Log for support requests
  logger.error('API Error', {
    correlationId,
    code: error.body?.error?.code,
    status: error.status
  });
}
```

---

## Retry Strategies

### Exponential Backoff

For transient errors (429, 503, 504), implement exponential backoff:

```javascript
async function withRetry(fn, maxRetries = 3) {
  for (let attempt = 0; attempt < maxRetries; attempt++) {
    try {
      return await fn();
    } catch (error) {
      const isRetryable = [429, 503, 504].includes(error.status);
      
      if (isRetryable && attempt < maxRetries - 1) {
        const retryAfter = error.headers?.get('Retry-After');
        const delay = retryAfter 
          ? parseInt(retryAfter) * 1000 
          : Math.pow(2, attempt) * 1000; // 1s, 2s, 4s
        
        console.log(`Retrying in ${delay}ms (attempt ${attempt + 1})`);
        await new Promise(resolve => setTimeout(resolve, delay));
        continue;
      }
      throw error;
    }
  }
}

const widget = await withRetry(() => 
  widgets.getWidgetById({ widgetId: 'widget-id' })
);
```

### Idempotent Retries

For POST/PUT operations, use idempotency keys to safely retry:

```javascript
import { v4 as uuidv4 } from 'uuid';

const idempotencyKey = uuidv4();

const widget = await withRetry(() => 
  widgets.createWidget({
    createWidgetRequest: { name: 'My Widget' }
  }, {
    headers: { 'Idempotency-Key': idempotencyKey }
  })
);
```

<Info>
  See [Idempotency](/docs/reference/idempotency) for more details on safe retries.
</Info>

---

## Best Practices

<AccordionGroup>
  <Accordion title="Always Handle Errors">
    Never assume API calls will succeed. Always wrap calls in try/catch and handle specific error codes.
  </Accordion>
  
  <Accordion title="Log Correlation IDs">
    Store correlation IDs in your logs for debugging and include them in support requests for faster resolution.
  </Accordion>
  
  <Accordion title="Implement Backoff for Rate Limits">
    For rate limiting (429), use exponential backoff with jitter. Always check the `Retry-After` header.
  </Accordion>
  
  <Accordion title="Validate Before Sending">
    Validate data client-side before making API calls to catch validation errors early and reduce unnecessary requests.
  </Accordion>
  
  <Accordion title="Handle Plan Restrictions Gracefully">
    When you receive `AUTHZ_PLAN_RESTRICTION` or `QUOTA_*` errors, provide users with clear upgrade paths or alternatives.
  </Accordion>
</AccordionGroup>
